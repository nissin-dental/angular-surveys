<div class="question-offered-answer-list-builder">
  <div class="question-offered-answer-list" ng-sortable="ctrl.offeredAnswersSortableConfig"
       ng-model="ctrl.question.offeredAnswers" role="list">
    <div class="mw-question-offered-answer" ng-repeat="answer in ctrl.question.offeredAnswers" role="listitem">
      <div class="drag-handle" ng-if="!ctrl.readOnly">
        <i class="fa fa-arrows-v fa-lg handle-inner"></i>

      </div>
      <div class="option-type-indicator">
        <i ng-if="ctrl.question.type=='radio'" class="fa fa-circle-thin fa-fw"></i>
        <i ng-if="ctrl.question.type=='checkbox'" class="fa fa-square-o fa-fw"></i>
      </div>
      <input wd-focus-me="ctrl.isNewAnswer[answer.id]" type="text" ng-model="answer.value"
             ng-keypress="ctrl.keyPressedOnInput($event,answer)" required class="form-control offered-answer-value "
             ng-readonly="ctrl.readOnly">
      <button role="button" class="remove-item-button" ng-click="ctrl.removeOfferedAnswer(answer)"
              ng-if="!ctrl.readOnly"
              ng-attr-title="{{'mwForm.buttons.remove' | translate}}"
              uib-popover="{{'mwForm.buttons.remove' | translate}}" popover-trigger="mouseenter"
              popover-placement="top">
        <i class="fa fa-times"></i>
      </button>
      <textarea type="text" ng-model="answer.explanation" ng-if="ctrl.question.type=='radio' || ctrl.question.type == 'checkbox'"
             class="form-control offered-answer-explanation" placeholder="{{'target.mwForm.question.comment-given-once-answered'|translate}}"
             ng-readonly="ctrl.readOnly"></textarea>
      <div ng-if="answer.image" class="image-offered-answer">
        <img ng-src="{{answer.image}}" class="offered-answer"/>
        <button role="button" class="remove-item-button" ng-click="answer.image = null"
                ng-if="!ctrl.readOnly"
                ng-attr-title="{{'mwForm.buttons.remove' | translate}}"
                uib-popover="{{'mwForm.buttons.remove' | translate}}" popover-trigger="mouseenter"
                popover-placement="top">
          <i class="fa fa-times"></i>
        </button>
      </div>
      <button type="button" class="moog-button large offered-answer" ngf-select
              ngf-change="ctrl.selectImageButtonClicked(answer, $file)" accept='image/*'
              ng-readonly="ctrl.readOnly"
              ng-click="ctrl.ignoreClose()"
              ng-if="!answer.image"><span>{{'target.mwForm.questions.add-image' | translate}}</span></button>
      <div class="checkbox">
        <label>

          <input ng-if="ctrl.question.type=='radio'" class="correct-answer-checkbox" ng-change="ctrl.updateMaxCorrectAnswers(answer)" type="radio" ng-model="answer.correctAnswer" ng-value="true">
          <input ng-if="ctrl.question.type=='checkbox'" class="correct-answer-checkbox" ng-change="ctrl.updateMaxCorrectAnswers(answer)" type="checkbox" ng-model="answer.correctAnswer">
          <span>{{'target.mwForm.questions.correct-answer' | translate}}</span>
        </label>
      </div>
    </div>
  </div>
  <div class="mw-question-offered-answer add-new-answer-widget" ng-if="!ctrl.readOnly">
    <div ng-if="(ctrl.question.type == 'radio' || ctrl.question.type == 'checkbox') && ctrl.question.offeredAnswers.length < 2" class="min-answers-text">
      {{'target.mwForm.questions.min-answers' | translate}}
    </div>
    <div ng-if="ctrl.question.type == 'radio' && ctrl.hasCorrectAnswer === false" class="min-answers-text">
      {{'target.mwForm.questions.correct-answer-required' | translate}}
    </div>
    <div class="drag-handle">
    </div>
    <div class="option-type-indicator">
      <i ng-if="ctrl.question.type=='radio'" class="fa fa-circle-thin fa-fw"></i>
      <i ng-if="ctrl.question.type=='checkbox'" class="fa fa-square-o fa-fw"></i>
    </div>
    <span ng-click="ctrl.addNewOfferedAnswer()" role="button">
            <input type="text" class="form-control  offered-answer-value"
                   value="{{'target.mwForm.question.buttons.addOption'|translate}}">
        </span>
  </div>
  <div class="mw-question-offered-answer custom-answer" ng-if="ctrl.question.otherAnswer">
    <div class="drag-handle" ng-if="!ctrl.readOnly">

    </div>
    <div class="option-type-indicator">
      <i ng-if="ctrl.question.type=='radio'" class="fa fa-circle-thin fa-fw"></i>
      <i ng-if="ctrl.question.type=='checkbox'" class="fa fa-square-o fa-fw"></i>
    </div>
    <label translate="target.mwForm.question.otherLabel">Inna: </label>
    <input type="text" value="{{'target.mwForm.question.userAnswer'|translate}}"
           class="form-control offered-answer-value " readonly>
    <button type="button" role="button" class="remove-item-button" ng-click="ctrl.removeCustomAnswer()"
            ng-if="!ctrl.readOnly"
            ng-attr-title="{{'mwForm.buttons.remove' | translate}}"
            uib-popover="{{'mwForm.buttons.remove' | translate}}" popover-trigger="mouseenter" popover-placement="top">
      <i class="fa fa-times"></i>
    </button>
  </div>
</div>
